<div class="container-fluid py-4">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="h2 mb-0">🏛️ Admin Dashboard</h1>
      <p class="text-muted mb-0">Indian Blogging Platform Administration</p>
    </div>
    <div>
      <%= link_to "🔙 Back to Site", root_path, class: "btn btn-outline-secondary me-2" %>
      <%= link_to "🚪 Logout", admin_logout_path,
          data: { turbo_method: :delete },
          class: "btn btn-danger" %>
    </div>
  </div>

  <!-- Statistics Cards -->
  <div class="row mb-4">
    <div class="col-md-2">
      <div class="card bg-primary text-white">
        <div class="card-body text-center">
          <h3 class="card-title"><%= @total_posts %></h3>
          <p class="card-text">📝 Total Posts</p>
        </div>
      </div>
    </div>
    <div class="col-md-2">
      <div class="card bg-success text-white">
        <div class="card-body text-center">
          <h3 class="card-title"><%= @published_posts %></h3>
          <p class="card-text">✅ Published</p>
        </div>
      </div>
    </div>
    <div class="col-md-2">
      <div class="card bg-warning text-white">
        <div class="card-body text-center">
          <h3 class="card-title"><%= @draft_posts %></h3>
          <p class="card-text">📄 Drafts</p>
        </div>
      </div>
    </div>
    <div class="col-md-2">
      <div class="card bg-info text-white">
        <div class="card-body text-center">
          <h3 class="card-title"><%= @total_users %></h3>
          <p class="card-text">👥 Users</p>
        </div>
      </div>
    </div>
    <div class="col-md-2">
      <div class="card bg-secondary text-white">
        <div class="card-body text-center">
          <h3 class="card-title"><%= @total_comments %></h3>
          <p class="card-text">💬 Comments</p>
        </div>
      </div>
    </div>
    <div class="col-md-2">
      <div class="card bg-dark text-white">
        <div class="card-body text-center">
          <h3 class="card-title"><%= Post.where('created_at >= ?', 7.days.ago).count %></h3>
          <p class="card-text">📅 This Week</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">⚡ Quick Actions</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-3">
              <%= link_to admin_posts_path, class: "btn btn-outline-primary w-100 mb-2" do %>
                📝 Manage Posts
              <% end %>
            </div>
            <div class="col-md-3">
              <%= link_to admin_users_path, class: "btn btn-outline-info w-100 mb-2" do %>
                👥 Manage Users
              <% end %>
            </div>
            <div class="col-md-3">
              <%= link_to root_path, class: "btn btn-outline-success w-100 mb-2" do %>
                🌐 View Site
              <% end %>
            </div>
            <div class="col-md-3">
              <%= link_to "#", class: "btn btn-outline-warning w-100 mb-2" do %>
                📊 Analytics
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="row">
    <!-- Recent Posts -->
    <div class="col-md-6">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">📝 Recent Posts</h5>
          <%= link_to "View All", admin_posts_path, class: "btn btn-sm btn-outline-primary" %>
        </div>
        <div class="card-body">
          <% if @recent_posts.any? %>
            <% @recent_posts.each do |post| %>
              <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                <div>
                  <h6 class="mb-1"><%= post.title %></h6>
                  <small class="text-muted">
                    By <%= post.user.display_name %> •
                    <%= time_ago_in_words(post.created_at) %> ago •
                    <span class="badge bg-<%= post.status == 'published' ? 'success' : 'warning' %>">
                      <%= post.status %>
                    </span>
                  </small>
                </div>
                <div>
                  <%= link_to "View", admin_post_path(post), class: "btn btn-sm btn-outline-primary" %>
                </div>
              </div>
            <% end %>
          <% else %>
            <p class="text-muted">No posts found.</p>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Recent Users -->
    <div class="col-md-6">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">👥 Recent Users</h5>
          <%= link_to "View All", admin_users_path, class: "btn btn-sm btn-outline-primary" %>
        </div>
        <div class="card-body">
          <% if @recent_users.any? %>
            <% @recent_users.each do |user| %>
              <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                <div>
                  <h6 class="mb-1"><%= user.display_name %></h6>
                  <small class="text-muted">
                    <%= user.email %> •
                    <%= time_ago_in_words(user.created_at) %> ago •
                    <%= pluralize(user.posts.count, 'post') %>
                  </small>
                </div>
                <div>
                  <%= link_to "View", admin_user_path(user), class: "btn btn-sm btn-outline-primary" %>
                </div>
              </div>
            <% end %>
          <% else %>
            <p class="text-muted">No users found.</p>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Comments -->
  <div class="row mt-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">💬 Recent Comments</h5>
        </div>
        <div class="card-body">
          <% if @recent_comments.any? %>
            <% @recent_comments.each do |comment| %>
              <div class="d-flex justify-content-between align-items-start py-2 border-bottom">
                <div class="flex-grow-1">
                  <h6 class="mb-1"><%= comment.user.display_name %></h6>
                  <p class="mb-1"><%= truncate(comment.content, length: 100) %></p>
                  <small class="text-muted">
                    On "<%= comment.post.title %>" •
                    <%= time_ago_in_words(comment.created_at) %> ago
                  </small>
                </div>
                <div>
                  <%= link_to "Delete", admin_comment_path(comment),
                      method: :delete,
                      data: { confirm: "Are you sure?" },
                      class: "btn btn-sm btn-outline-danger" %>
                </div>
              </div>
            <% end %>
          <% else %>
            <p class="text-muted">No comments found.</p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
